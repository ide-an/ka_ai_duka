passive-avoid

このAIは毎フレーム、自機の周囲の弾について弾道予測を行って、被弾しそうなときに避けるAIです。
おおよそのアルゴリズムは
http://www.usamimi.info/~ide/programe/touhouai/report.pdf
で述べた脊髄反射的な回避アルゴリズムと同様のものですが、なるべく画面中央下辺りに戻るようにする処理も追加しています。
当たり判定や弾の移動予測に関するサンプルとして用意しました。

このAIを実行するときはmain.luaを読み込むように設定して下さい。

--------------------------------------------------
アルゴリズム詳細:

まず大枠として、現在行える行動のうち、コストが最小のものを常に選択するようにキー操作を行います。
で、コストとして何を考えるのかがキモですが、
 * その行動を続けると被弾するかどうか
 * 画面中央下から遠ざかる操作かどうか
を考え、これらに該当する場合にコストが大きくなるとしています。

前者(被弾するかどうか)についてはさらに、何フレーム先で被弾するかによってコストの大きさを決めています。
未来であればあるほど弾道予測の信頼性が低いので、その分被弾コストを下げています。

擬似コードで書くと以下の様な感じ
----
for 行動 in {停止,右移動,左移動,上移動,下移動} do
  leave_center_cost = 0
  if X方向について中央から離れる行動 then
    leave_center_cost += 0.0001
  end
  if Y方向について中央下から離れる行動 then
    leave_center_cost += 0.0001
  end

  hit_cost = 0
  for item in 自機近傍の弾とか敵とか do
    for n=1,予測するフレーム上限 do
      if 当たり判定(nフレーム後の自機, nフレーム後のitem) then  
        hit_cost += 1/(2^n)
      end
    end
  end

  total_cost[行動] = leave_center_cost + hit_cost
end

total_cost[行動]が最小の行動を選び、キー入力として送信
----

--------------------------------------------------

このサンプルコードのライセンスですがコードのコメントに表記している通り、パブリックドメイン(CC0)です。
